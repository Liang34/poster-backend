# This workflow will do a clean install of node dependencies, build the source code and run tests across different versions of node
# For more information see: https://help.github.com/actions/language-and-framework-guides/using-nodejs-with-github-actions
# github actions 中文文档 https://docs.github.com/cn/actions/getting-started-with-github-actions
# 自动化测试

name: test
# 触发条件
on:
    push:
        branches:
            - master
        # 包含下面文件改动就会重新构建
        paths:
            - '.github/workflows/**'
            - '__test__/**'
            - 'src/**'

jobs:
    test:
        runs-on: ubuntu-latest

        steps:
            - uses: actions/checkout@v2 # git pull， 第三方的actions
            - name: Use Node.js
              uses: actions/setup-node@v1 # 安装nodeJS，第三方actions
              with:
                  node-version: 14
            - name: lint and test
              run: |
                  npm i
                  npm run lint
                  npm run test:remote
